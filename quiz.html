<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ConicLab ‚Äî –í—ñ–∫—Ç–æ—Ä–∏–Ω–∞: –í–≥–∞–¥–∞–π –∫—Ä–∏–≤—É</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

  <audio id="background-music" loop autoplay>
      <source src="music/quiz.m4a" type="audio/mp4">
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞—É–¥—ñ–æ-–µ–ª–µ–º–µ–Ω—Ç.
  </audio>

  <div id="intro-overlay" class="quiz-overlay">
    <div class="intro-content">
      <h2>–õ–æ—Ç–µ—Ä–µ—è –ó–∞–ø–∏—Ç–∞–Ω—å</h2>
      <p id="lottery-status-text">–í–∏–∑–Ω–∞—á–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —É—á–∞—Å–Ω–∏–∫–∞...</p>
      <div id="lottery-numbers" class="lottery-numbers-container">
        </div>
      <div id="selected-number-display" class="hidden">
        <p>–í–∞—à –Ω–æ–º–µ—Ä:</p>
        <span id="winning-number"></span>
        
        <div id="lottery-controls" class="controls-row hidden">
            <button id="respinBtn" class="btn subtle">–ö—Ä—É—Ç–∏–º–æ –¥–∞–ª—ñ</button>
            <button id="proceedBtn" class="btn primary">–î–∞–ª—ñ</button>
        </div>
        
      </div>
    </div>
  </div>

  <div id="results-overlay" class="quiz-overlay hidden">
    <div class="results-content">
      <div class="checkmark">‚úì</div>
      <h1>–í—ñ–∫—Ç–æ—Ä–∏–Ω—É –ó–∞–≤–µ—Ä—à–µ–Ω–æ!</h1>
      <p class="final-score-text">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p>
      <p id="final-score" class="final-score-display">12 / 12</p>
      <button id="play-again-btn" class="btn primary">–ó—ñ–≥—Ä–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
    </div>
    <div id="dislike-container"></div>
  </div>

  <header class="topbar">
    <div class="brand">
      <div class="logo">–ö–æ–º–∞–Ω–¥–∞ –ì—ñ–ø–µ—Ä–º–µ–≥–∞</div>
      <div class="subtitle">–ö—Ä–∏–≤—ñ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ä—è–¥–∫—É</div>
    </div>
    <nav class="nav">
      <a href="index.html" class="nav-link">–ó–∞–≥–∞–ª—å–Ω–∞ –ø–æ–±—É–¥–æ–≤–∞</a>
      <a href="canonical.html" class="nav-link">–ö–∞–Ω–æ–Ω—ñ—á–Ω–∞ –ø–æ–±—É–¥–æ–≤–∞</a>
      <a id="nav-theory" class="nav-link" href="theory_math.html">–¢–µ–æ—Ä—ñ—è</a>
      <a href="quiz.html" class="nav-link active">–í—ñ–∫—Ç–æ—Ä–∏–Ω–∞</a>
      <a href="tasks.html" class="nav-link">–ó–∞–¥–∞—á—ñ</a>
      <a id="nav-story" class="nav-link" href="theory_story.html">–ù–∞—à–∞ —ñ—Å—Ç–æ—Ä—ñ—è</a>
    </nav>
    <div class="controls">
      <button id="musicToggle" class="music-btn" title="–ú—É–∑–∏–∫–∞">
        üíø
      </button>

      <label class="theme-switch">
        <input id="themeToggle" type="checkbox" />
        <span class="slider"></span>
      </label>
    </div>
  </header>

  <main id="quiz-main" class="layout quiz-page hidden">
    <div class="card quiz-card">
      <h1>–í—ñ–∫—Ç–æ—Ä–∏–Ω–∞: –ó–∞–ø–∏—Ç–∞–Ω–Ω—è</h1>
      <p class="quiz-instructions">–£–≤–∞–∂–Ω–æ —á–∏—Ç–∞–π—Ç–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –æ–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.</p>
      <div id="equation-display" class="equation-preview quiz"></div>
      <p id="question-text" class="quiz-question-text"></p>
      <div id="answer-buttons" class="controls-row quiz-answers"></div>
      <div id="feedback-display" class="feedback"></div>
      <div class="controls-row">
          <button id="next-question-btn" class="btn primary hidden">–ù–∞—Å—Ç—É–ø–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è ‚Üí</button>
      </div>
      <div id="score-display" class="score">–†–∞—Ö—É–Ω–æ–∫: 0 / 0 | –ó–∞–ø–∏—Ç–∞–Ω–Ω—è: 0 / 12</div>
    </div>
  </main>

  <footer class="footer">
    <div>–ö–æ–º–∞–Ω–¥–∞ –ì—ñ–ø–µ—Ä–º–µ–≥–∞ ‚Ä¢ –ö—Ä–∏–≤—ñ –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ä—è–¥–∫—É</div>
  </footer>
  
  <script src="scripts/theory.js"></script>
  <script src="scripts/quiz.js"></script> 
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const audio = document.getElementById('background-music');
        const musicBtn = document.getElementById('musicToggle');
        
        if (audio && musicBtn) {
            audio.volume = 0.05; 
            let isPlaying = false;

            const updateState = (playing) => {
                isPlaying = playing;
                if (playing) {
                    musicBtn.classList.add('playing'); 
                    musicBtn.style.filter = "none";    
                } else {
                    musicBtn.classList.remove('playing'); 
                    musicBtn.style.filter = "grayscale(100%)"; 
                }
            };

            musicBtn.addEventListener('click', () => {
                if (isPlaying) {
                    audio.pause();
                    updateState(false);
                } else {
                    audio.play().then(() => {
                        updateState(true);
                    }).catch(e => console.error("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è:", e));
                }
            });

            const playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    updateState(true);
                }).catch(() => {
                    updateState(false);
                    console.log("–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –¥–∏—Å–∫.");
                });
            }
        }
    });
  </script>
</body>
</html>